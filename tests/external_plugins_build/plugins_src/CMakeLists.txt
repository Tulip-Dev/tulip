CMAKE_MINIMUM_REQUIRED(VERSION 3.1)

# Needed by clang compiler provided by MacPorts or homebrew
IF(POLICY CMP0025)
  CMAKE_POLICY(SET CMP0025 NEW)
ENDIF(POLICY CMP0025)

# Remove CMake warnings related to rpath on MacOS
IF(POLICY CMP0042)
  CMAKE_POLICY(SET CMP0042 NEW)
ENDIF(POLICY CMP0042)
IF(POLICY CMP0068)
  CMAKE_POLICY(SET CMP0068 NEW)
ENDIF(POLICY CMP0068)

FIND_PACKAGE(TULIP REQUIRED)

TULIP_SET_COMPILER_OPTIONS()

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR} ${TULIP_INCLUDE_DIR})

SET(PLUGIN_NAME TestPlugins-${TULIP_VERSION})
SET(PLUGIN_SRCS TestPlugins.cpp)

ADD_LIBRARY(${PLUGIN_NAME} SHARED ${PLUGIN_SRCS})
TARGET_LINK_LIBRARIES(${PLUGIN_NAME} ${TULIP_CORE_LIBRARY})

TULIP_INSTALL_PLUGIN(${PLUGIN_NAME} ${TULIP_PLUGINS_DIR}/test)
